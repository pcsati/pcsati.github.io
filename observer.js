<!-- //Program to make observation schedule for Hanle and Mount //Abu, but can also be used for any other place by putting name, //Latitude and Longitude of that place. It make rise or set ( //zenith=45 degree) for TACTIC sources plus two more user defined //sources. It gives the dark period of observation with minimum //time of 2 hours observation. //By Pradeep Chandra pcsati@gmail.com or chandrap@barc.gov.in or chandra_pradeep@yahoo.com--> 
function place(name,latitude,ns,longitude,we,zone,dss,dse){this.name=name;this.latitude=latitude;this.ns=ns;this.longitude=longitude;this.we=we;this.zone=zone;this.dss=dss;this.dse=dse;};var atlas=new Array(new place("Mount Abu","24:37:41",0,"72:45:11",1,-330,"",""),new place("Hanle","32:46:46",0,"78:57:51",1,-330,"",""),new place("Mount Abu","24:37:41",0,"72:45:11",1,-330,"",""),new place("La Palma","28:45:42",0,"17:53:27",0,-0,"",""),new place("Arizona","31:40:30",0,"110:57:07",0,420,"",""),new place("Namibia","23:16:18",1,"16:30:0",1,-60,"",""),new place("Yangbajing","30:06:38",0,"90:31:50",1,-480,"",""));function observatory(place,now){this.name=place.name;this.year=now.getFullYear();this.month=now.getMonth()+1;this.day=now.getDate();this.hours=now.getHours();this.minutes=now.getMinutes();this.seconds=now.getSeconds();this.tz=place.zone;this.latitude=parsecol(place.latitude);if(place.ns==1){this.latitude= -this.latitude;}this.longitude=parsecol(place.longitude);if(place.we==1){this.longitude= -this.longitude;}};var now=new Date();var observer=new observatory(atlas[0],now);function sitename(){var sname=observer.name;var latd=Math.abs(observer.latitude);var latdi=Math.floor(latd);sname+=((latdi<10)?" 0":" ")+latdi;latm=60*(latd-latdi);latmi=Math.floor(latm);sname+=((latmi<10)?":0":":")+latmi;lats=60*(latm-latmi);latsi=Math.floor(lats);sname+=((latsi<10)?":0":":")+latsi;sname+=((observer.latitude>=0)?"N ":"S ");var longd=Math.abs(observer.longitude);var longdi=Math.floor(longd);sname+=((longdi<10)?"0":"")+longdi;longm=60*(longd-longdi);longmi=Math.floor(longm);sname+=((longmi<10)?":0":":")+longmi;longs=60*(longm-longmi);longsi=Math.floor(longs);sname+=((longsi<10)?":0":":")+longsi;sname+=((observer.longitude>=0)?"W":"E");return sname;};function checkdst(obs){with(document.table1){if((Place.selectedIndex<0)||(Place.selectedIndex>=atlas.length))return 0;var dss=atlas[Place.selectedIndex].dss;var dse=atlas[Place.selectedIndex].dse;var ns=atlas[Place.selectedIndex].ns;}if(dss.length==0)return 0;if(dse.length==0)return 0;var col1=dss.indexOf(":");var col2=dss.lastIndexOf(":");var col3=dss.length;var dssm=parseInt(dss.substring(0,col1),10);var dssw=parseInt(dss.substring(col1+1,col2),10);var dssd=parseInt(dss.substring(col2+1,col3),10);col1=dse.indexOf(":");col2=dse.lastIndexOf(":");col3=dse.length;var dsem=parseInt(dse.substring(0,col1),10);var dsew=parseInt(dse.substring(col1+1,col2),10);var dsed=parseInt(dse.substring(col2+1,col3),10);var jdt=jd0(obs.year,obs.month,obs.day);var ymd=jdtocd(jdt);var fymd=jdtocd(jdt-ymd[2]+1);if(ns==0){if((ymd[1]>dssm)&&(ymd[1]<dsem))return-60;if((ymd[1]<dssm)||(ymd[1]>dsem))return 0;}else{if((ymd[1]>dssm)||(ymd[1]<dsem))return-60;if((ymd[1]<dssm)&&(ymd[1]>dsem))return 0;}if(ymd[1]==dssm){var ddd=dssd-fymd[3]+1;ddd=ddd+7*(dssw);while(ddd>month_length[ymd[1]-1])ddd-=7;if(ymd[2]<ddd)return 0;return-60;}if(ymd[1]==dsem){var ddd=dsed-fymd[3]+1;ddd=ddd+7*(dsew);while(ddd>month_length[ymd[1]-1])ddd-=7;if(ymd[2]<ddd)return-60;return 0;}return 0;};function jd(obs){var j=jd0(obs.year,obs.month,obs.day);j+=(obs.hours+((obs.minutes+obs.tz)/60.0)+(obs.seconds/3600.0))/24;return j;};function local_sidereal(obs){var res=g_sidereal(obs.year,obs.month,obs.day);res+=1.00273790935*(obs.hours+(obs.minutes+obs.tz+(obs.seconds/60.0))/60.0);res-=obs.longitude/15.0;while(res<0)res+=24.0;while(res>24)res-=24.0;return res;};function radtoaa(ra,dec,obs){var lst=local_sidereal(obs);var x=cosd(15.0*(lst-ra))*cosd(dec);var y=sind(15.0*(lst-ra))*cosd(dec);var z=sind(dec);var xhor=x*sind(obs.latitude)-z*cosd(obs.latitude);var yhor=y;var zhor=x*cosd(obs.latitude)+z*sind(obs.latitude);var azimuth=rev(atan2d(yhor,xhor)+180.0);var altitude=atan2d(zhor,Math.sqrt(xhor*xhor+yhor*yhor));return new Array(altitude,azimuth);};function aatorad(alt,az,obs){var lst=local_sidereal(obs);var lat=obs.latitude;var j=sind(alt)*sind(lat)+cosd(alt)*cosd(lat)*cosd(az);var dec=asind(j);j=(sind(alt)-sind(lat)*sind(dec))/(cosd(lat)*cosd(dec));var s=acosd(j);j=sind(az);if(j>0)s=360-s;var ra=lst-s/15;if(ra<0)ra+=24;if(ra>=24)ra-=24;return new Array(ra,dec);} 
